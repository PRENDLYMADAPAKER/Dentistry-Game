<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dental Hub Games</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: "Poppins", sans-serif;
  }

  body {
    overflow: hidden;
    background: radial-gradient(circle at bottom, #0a1931, #000);
    color: white;
  }

  /* Floating bubbles */
  .bubbles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: -1;
  }

  .bubbles span {
    position: absolute;
    bottom: -50px;
    width: 20px;
    height: 20px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 50%;
    animation: bubble 12s linear infinite;
  }

  @keyframes bubble {
    0% {
      transform: translateY(0) scale(1);
      opacity: 0.7;
    }
    100% {
      transform: translateY(-120vh) scale(1.5);
      opacity: 0;
    }
  }

  .bubbles span:nth-child(odd) {
    width: 30px;
    height: 30px;
    animation-duration: 15s;
    background: rgba(173, 216, 230, 0.2);
  }

  .bubbles span:nth-child(even) {
    width: 15px;
    height: 15px;
    animation-duration: 10s;
  }

  /* Header */
  header {
    text-align: center;
    margin-top: 30px;
  }

  header h1 {
    font-size: 2rem;
    letter-spacing: 2px;
    color: #00bcd4;
    text-shadow: 0 0 10px #00bcd4;
  }

  header p {
    font-style: italic;
    color: #ddd;
    margin-top: 5px;
  }

  /* Main menu */
  .menu {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 80vh;
    transition: transform 0.8s ease-in-out;
  }

  .menu button {
    width: 220px;
    margin: 15px;
    padding: 15px 0;
    background: linear-gradient(90deg, #00bcd4, #2196f3);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 1.2rem;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s, background 0.3s;
  }

  .menu button:hover {
    transform: scale(1.08);
    background: linear-gradient(90deg, #03a9f4, #00bcd4);
  }

  /* Game screens */
  .game-screen {
    position: absolute;
    top: 0;
    left: 100%;
    width: 100%;
    height: 100vh;
    padding: 20px;
    background: transparent;
    transition: all 0.8s ease-in-out;
  }

  .active-screen {
    left: 0 !important;
  }

  /* Header for game pages */
  .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }

  .home-btn {
    background: #00bcd4;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 20px;
    font-weight: 600;
    cursor: pointer;
  }

  .home-btn:hover {
    background: #03a9f4;
  }

  .score-timer {
    font-size: 1.1rem;
  }

  .question-area, .wordscape-area, .case-area {
    text-align: center;
    margin-top: 40px;
  }

  .choices {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 15px;
  }

  .choices button {
    width: 80%;
    padding: 10px;
    margin: 8px;
    border: 2px solid #00bcd4;
    background: transparent;
    color: white;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
  }

  .choices button:hover {
    background: #00bcd4;
    color: #000;
  }

  .letters {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 15px;
  }

  .letters button {
    width: 45px;
    height: 45px;
    margin: 5px;
    font-size: 1.1rem;
    border-radius: 10px;
    background: rgba(255,255,255,0.1);
    color: white;
    border: 1px solid #00bcd4;
    transition: transform 0.2s;
  }

  .letters button:hover {
    transform: scale(1.1);
    background: #00bcd4;
    color: #000;
  }

  .current-word {
    font-size: 1.5rem;
    margin-top: 20px;
    min-height: 30px;
  }

  #muteBtn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    padding: 10px 14px;
    border-radius: 50%;
    font-size: 1.2rem;
    cursor: pointer;
    transition: 0.3s;
  }

  #muteBtn:hover {
    background: rgba(255,255,255,0.4);
  }
</style>
</head>
<body>

<div class="bubbles">
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
</div>

<header>
  <h1>DENTAL HUB GAMES</h1>
  <p>Test your knowledge</p>
</header>

<!-- Home Menu -->
<div class="menu" id="menu">
  <button id="playWordscape">üß© Dental Wordscape</button>
  <button id="playQuiz">ü¶∑ Dental Quiz Game</button>
  <button id="playCase">üí¨ Dental Case Challenge</button>
</div>

<!-- Game Screens -->
<div class="game-screen" id="wordscapeScreen">
  <div class="top-bar">
    <button class="home-btn">Home</button>
    <div class="score-timer">Score: <span id="wordScore">0</span> | ‚è± <span id="wordTimer">15</span>s</div>
  </div>
  <div class="wordscape-area">
    <div class="current-word" id="currentWord"></div>
    <div class="letters" id="lettersContainer"></div>
  </div>
</div>

<div class="game-screen" id="quizScreen">
  <div class="top-bar">
    <button class="home-btn">Home</button>
    <div class="score-timer">Score: <span id="quizScore">0</span> | ‚è± <span id="quizTimer">15</span>s</div>
  </div>
  <div class="question-area">
    <h2 id="quizQuestion"></h2>
    <div class="choices" id="quizChoices"></div>
  </div>
</div>

<div class="game-screen" id="caseScreen">
  <div class="top-bar">
    <button class="home-btn">Home</button>
    <div class="score-timer">Score: <span id="caseScore">0</span> | ‚è± <span id="caseTimer">15</span>s</div>
  </div>
  <div class="case-area">
    <h2 id="caseQuestion"></h2>
    <div class="choices" id="caseChoices"></div>
  </div>
</div>

<!-- Mute button -->
<button id="muteBtn">üîä</button>

  <script>
// ==== CONFIG ====
const wordURL = "https://raw.githubusercontent.com/PRENDLYMADAPAKER/DentalGameData/refs/heads/main/dental_words.json";
const quizURL = "https://raw.githubusercontent.com/PRENDLYMADAPAKER/DentalGameData/refs/heads/main/dental_quiz.json";
const caseURL = "https://raw.githubusercontent.com/PRENDLYMADAPAKER/DentalGameData/refs/heads/main/dental_cases.json";

// ==== Elements ====
const menu = document.getElementById("menu");
const wordscapeScreen = document.getElementById("wordscapeScreen");
const quizScreen = document.getElementById("quizScreen");
const caseScreen = document.getElementById("caseScreen");

// music
const bgMusic = new Audio("https://cdn.pixabay.com/download/audio/2023/03/02/audio_0a34d8b92d.mp3?filename=chill-ambient-14497.mp3");
bgMusic.loop = true;
bgMusic.volume = 0.25;
bgMusic.play().catch(()=>{}); // autoplay softly

const muteBtn = document.getElementById("muteBtn");
let isMuted = false;
muteBtn.onclick = () => {
  isMuted = !isMuted;
  bgMusic.muted = isMuted;
  muteBtn.textContent = isMuted ? "üîá" : "üîä";
};

// Helper for screen transitions
function showScreen(screen) {
  [menu, wordscapeScreen, quizScreen, caseScreen].forEach(s => s.classList.remove("active-screen"));
  screen.classList.add("active-screen");
}

// ==== Menu Buttons ====
document.getElementById("playWordscape").onclick = () => startWordscape();
document.getElementById("playQuiz").onclick = () => startQuiz();
document.getElementById("playCase").onclick = () => startCase();

// ==== Home buttons ====
document.querySelectorAll(".home-btn").forEach(btn => {
  btn.onclick = () => {
    showScreen(menu);
    stopAllTimers();
  };
});

// ---- TIMER CONTROL ----
let wordTimerInt, quizTimerInt, caseTimerInt;
function stopAllTimers(){
  clearInterval(wordTimerInt);
  clearInterval(quizTimerInt);
  clearInterval(caseTimerInt);
}

// =============================
// ===== DENTAL WORDSCAPE =====
// =============================
let words = [], currentWord = "", letters = [], userInput = "", wordScore=0;
const wordScoreEl = document.getElementById("wordScore");
const wordTimerEl = document.getElementById("wordTimer");
const currentWordEl = document.getElementById("currentWord");
const lettersContainer = document.getElementById("lettersContainer");

async function startWordscape(){
  showScreen(wordscapeScreen);
  wordScore = parseInt(localStorage.getItem("wordScore"))||0;
  wordScoreEl.textContent = wordScore;
  const res = await fetch(wordURL); words = await res.json();
  nextWord();
}

function nextWord(){
  stopAllTimers();
  userInput="";
  currentWord = words[Math.floor(Math.random()*words.length)].toUpperCase();
  const shuffled = currentWord.split("").sort(()=>Math.random()-0.5);
  currentWordEl.textContent="";
  lettersContainer.innerHTML="";
  shuffled.forEach(l=>{
    const btn=document.createElement("button");
    btn.textContent=l;
    btn.onclick=()=>selectLetter(l,btn);
    lettersContainer.appendChild(btn);
  });
  startTimer(wordTimerEl,()=>nextWord());
}

function selectLetter(letter,btn){
  userInput+=letter;
  btn.disabled=true;
  currentWordEl.textContent=userInput;
  if(userInput===currentWord){
    wordScore+=10;
    localStorage.setItem("wordScore",wordScore);
    wordScoreEl.textContent=wordScore;
    setTimeout(nextWord,1000);
  }
}

// Undo last letter by backspace
document.addEventListener("keydown",e=>{
  if(wordscapeScreen.classList.contains("active-screen")){
    if(e.key==="Backspace" && userInput.length>0){
      userInput=userInput.slice(0,-1);
      currentWordEl.textContent=userInput;
      const btns=[...lettersContainer.querySelectorAll("button")];
      const used=btns.filter(b=>b.disabled);
      if(used.length>0) used[used.length-1].disabled=false;
    }
  }
});

// =============================
// ===== DENTAL QUIZ GAME =====
// =============================
let quizData=[], quizIndex=0, quizScore=0;
const quizScoreEl=document.getElementById("quizScore");
const quizTimerEl=document.getElementById("quizTimer");
const quizQuestion=document.getElementById("quizQuestion");
const quizChoices=document.getElementById("quizChoices");

async function startQuiz(){
  showScreen(quizScreen);
  quizScore=parseInt(localStorage.getItem("quizScore"))||0;
  quizScoreEl.textContent=quizScore;
  const res=await fetch(quizURL); quizData=await res.json();
  quizIndex=0; showQuiz();
}

function showQuiz(){
  stopAllTimers();
  if(quizIndex>=quizData.length) quizIndex=0;
  const q=quizData[quizIndex];
  quizQuestion.textContent=q.question;
  quizChoices.innerHTML="";
  q.choices.forEach(choice=>{
    const btn=document.createElement("button");
    btn.textContent=choice;
    btn.onclick=()=>checkQuizAnswer(choice,q.answer);
    quizChoices.appendChild(btn);
  });
  startTimer(quizTimerEl,()=>{
    quizIndex++; showQuiz();
  });
}

function checkQuizAnswer(selected,correct){
  if(selected===correct){
    quizScore+=5;
    localStorage.setItem("quizScore",quizScore);
    quizScoreEl.textContent=quizScore;
  }
  quizIndex++;
  showQuiz();
}

// =============================
// ===== DENTAL CASE CHALLENGE =====
// =============================
let caseData=[], caseIndex=0, caseScore=0;
const caseScoreEl=document.getElementById("caseScore");
const caseTimerEl=document.getElementById("caseTimer");
const caseQuestion=document.getElementById("caseQuestion");
const caseChoices=document.getElementById("caseChoices");

async function startCase(){
  showScreen(caseScreen);
  caseScore=parseInt(localStorage.getItem("caseScore"))||0;
  caseScoreEl.textContent=caseScore;
  const res=await fetch(caseURL); caseData=await res.json();
  caseIndex=0; showCase();
}

function showCase(){
  stopAllTimers();
  if(caseIndex>=caseData.length) caseIndex=0;
  const c=caseData[caseIndex];
  caseQuestion.textContent=c.case;
  caseChoices.innerHTML="";
  c.options.forEach(opt=>{
    const btn=document.createElement("button");
    btn.textContent=opt;
    btn.onclick=()=>checkCaseAnswer(opt,c.answer);
    caseChoices.appendChild(btn);
  });
  startTimer(caseTimerEl,()=>{
    caseIndex++; showCase();
  });
}

function checkCaseAnswer(selected,correct){
  if(selected===correct){
    caseScore+=5;
    localStorage.setItem("caseScore",caseScore);
    caseScoreEl.textContent=caseScore;
  }
  caseIndex++;
  showCase();
}

// ==== Universal 15s Timer ====
function startTimer(displayEl, callback){
  let time=15;
  displayEl.textContent=time;
  const int=setInterval(()=>{
    time--;
    displayEl.textContent=time;
    if(time<=0){
      clearInterval(int);
      callback();
    }
  },1000);
  if(displayEl===wordTimerEl) wordTimerInt=int;
  if(displayEl===quizTimerEl) quizTimerInt=int;
  if(displayEl===caseTimerEl) caseTimerInt=int;
}
</script>
</body>
</html>
