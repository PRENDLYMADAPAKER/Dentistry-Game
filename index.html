<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dental Hub Games</title>
<style>
:root{--accent:#00eaff;--accent2:#00ffb7;--glass-bg:rgba(0,40,80,0.36);--muted:#b6eaff;--white:#fff;}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
background:radial-gradient(circle at top left,#001427 0%,#00111f 35%,#000814 100%);
color:var(--white);min-height:100vh;overflow-x:hidden;}
.bubbles{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden;}
.bubble{position:absolute;bottom:-120px;border-radius:50%;background:rgba(255,255,255,0.12);
filter:blur(.6px);animation:rise linear infinite;box-shadow:0 6px 18px rgba(0,200,255,0.035);}
@keyframes rise{0%{transform:translateY(0) scale(1);opacity:.9;}
100%{transform:translateY(-140vh) scale(1.6);opacity:0;}}
header{text-align:center;padding-top:30px;z-index:2;position:relative;}
header h1{margin:0;font-size:28px;letter-spacing:1px;
background:linear-gradient(90deg,var(--accent),var(--accent2));
-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
header p{margin:6px 0 0;font-style:italic;color:var(--muted);}
main{z-index:2;position:relative;padding:28px 18px 60px;
display:flex;flex-direction:column;align-items:center;gap:20px;}
.home{display:flex;flex-direction:column;gap:16px;width:100%;max-width:920px;align-items:center;}
.tile{width:92%;max-width:720px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
border-radius:20px;padding:18px;text-align:left;display:flex;align-items:center;justify-content:space-between;gap:12px;
border:1px solid rgba(255,255,255,0.04);cursor:pointer;transition:.22s;backdrop-filter:blur(10px);}
.tile:hover{transform:translateY(-6px);box-shadow:0 30px 60px rgba(0,0,0,0.35);}
.tile .left{display:flex;align-items:center;gap:14px;}
.tile .icon{width:56px;height:56px;border-radius:12px;display:grid;place-items:center;font-weight:800;
background:linear-gradient(135deg,var(--accent),var(--accent2));color:#002;
box-shadow:0 8px 30px rgba(0,224,255,0.08);}
.tile h3{margin:0;font-size:18px;}
.tile p{margin:4px 0 0;color:var(--muted);font-size:13px;}
.game-area{display:none;width:100%;max-width:920px;justify-content:center;padding:24px;}
.game-panel{width:92%;max-width:640px;margin:0 auto;background:var(--glass-bg);
border-radius:20px;padding:20px;color:var(--white);backdrop-filter:blur(14px) saturate(150%);
border:1px solid rgba(255,255,255,0.08);box-shadow:0 30px 80px rgba(0,0,0,0.45);
opacity:0;transform:scale(.98) translateY(10px);
transition:.36s cubic-bezier(.2,.9,.3,1);}
.game-panel.show{opacity:1;transform:scale(1) translateY(0);}
.game-header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px;}
.home-btn{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.06);
color:var(--white);padding:8px 12px;border-radius:12px;cursor:pointer;}
.home-btn:hover{background:rgba(255,255,255,0.09);transform:translateY(-2px);}
.game-stats{display:flex;align-items:center;gap:12px;font-weight:700;color:var(--muted);}
.game-stats span strong{color:var(--white);margin-left:6px;}
h2#question{text-align:center;margin:16px 0 18px;font-size:20px;}
.options{display:flex;flex-direction:column;gap:10px;}
.option-btn{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
border:1px solid rgba(255,255,255,0.06);padding:12px;border-radius:12px;color:var(--white);
font-weight:700;cursor:pointer;transition:.16s;}
.option-btn:hover{transform:translateY(-4px);background:rgba(255,255,255,0.03);}
.word-row{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin:12px 0;}
.letter-chip{background:rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;font-weight:800;cursor:pointer;}
.controls{position:fixed;right:18px;bottom:18px;z-index:10;display:flex;gap:8px;}
.circle-btn{width:46px;height:46px;border-radius:50%;border:none;
background:rgba(255,255,255,0.05);color:var(--white);cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,0.4);}
@media(max-width:700px){header h1{font-size:20px;}.tile{width:94%;}.game-panel{width:94%;padding:16px;border-radius:16px;}}
</style>
</head>
<body>
<div class="bubbles" id="bubbles"></div>

<header>
  <h1>DENTAL HUB GAMES</h1>
  <p><i>Test your knowledge</i></p>
</header>

<main>
  <section class="home" id="home">
    <div class="tile" id="openWordscape"><div class="left">
      <div class="icon">üß©</div><div><h3>Dental Wordscape</h3><p>Form dental terms from letters</p></div></div>
      <div class="meta"><strong id="hsWord">0</strong> pts</div>
    </div>
    <div class="tile" id="openQuiz"><div class="left">
      <div class="icon">üìò</div><div><h3>Dental Quiz Game</h3><p>Timed multiple-choice (15s)</p></div></div>
      <div class="meta"><strong id="hsQuiz">0</strong> pts</div>
    </div>
    <div class="tile" id="openCase"><div class="left">
      <div class="icon">üí¨</div><div><h3>Case Challenge</h3><p>Clinical scenario practice</p></div></div>
      <div class="meta"><strong id="hsCase">0</strong> pts</div>
    </div>
  </section>

  <section class="game-area" id="gameArea" aria-hidden="true">
    <div class="game-panel" id="gamePanel">
      <div class="game-header">
        <button class="home-btn" id="btnHome">üè†</button>
        <div class="game-stats">
          <span>Score <strong id="scoreDisplay">0</strong></span>
          <span>‚è± <strong id="timerDisplay">15</strong>s</span>
        </div>
      </div>
      <h2 id="question">Loading...</h2>
      <div id="contentArea"></div>
    </div>
  </section>
</main>

<div class="controls">
  <button id="muteBtn" class="circle-btn" title="Mute / Unmute">üîä</button>
  <button id="backspaceBtn" class="circle-btn" title="Undo last (Wordscape)">‚å´</button>
</div>

<audio id="bgAudio" loop crossorigin="anonymous">
  <source src="https://cdn.pixabay.com/download/audio/2023/03/08/audio_6e56e3a30a.mp3?filename=relaxing-background-music-141069.mp3" type="audio/mpeg">
</audio>

<script>
/* ------------ Config ------------ */
const wordURL = "https://raw.githubusercontent.com/PRENDLYMADAPAKER/DentalGameData/main/dental_words.json";
const quizURL = "https://cdn.jsdelivr.net/gh/PRENDLYMADAPAKER/DentalGameData/dental_quiz.json";
const caseURL = "https://cdn.jsdelivr.net/gh/PRENDLYMADAPAKER/DentalGameData/dental_cases.json";

/* ------------ Elements ------------ */
const bubblesEl=document.getElementById('bubbles'),homeEl=document.getElementById('home'),
gameArea=document.getElementById('gameArea'),gamePanel=document.getElementById('gamePanel'),
contentArea=document.getElementById('contentArea'),questionEl=document.getElementById('question'),
scoreDisplay=document.getElementById('scoreDisplay'),timerDisplay=document.getElementById('timerDisplay'),
btnHome=document.getElementById('btnHome'),muteBtn=document.getElementById('muteBtn'),
backspaceBtn=document.getElementById('backspaceBtn'),bgAudio=document.getElementById('bgAudio');

function makeBubbles(c=22){for(let i=0;i<c;i++){const b=document.createElement('div');
b.className='bubble';const s=12+Math.random()*42;b.style.width=b.style.height=s+'px';
b.style.left=(Math.random()*100)+'vw';b.style.animationDuration=(8+Math.random()*9)+'s';
b.style.opacity=(0.5+Math.random()*0.6);bubblesEl.appendChild(b);}}
makeBubbles();

/* ------------ Audio ------------ */
let muted=localStorage.getItem('muted')==='true';
const sfx={click:new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_0f0f3f2c2a.mp3?filename=soft-click-6002.mp3"),
correct:new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_7e7c1e3b36.mp3?filename=correct-2-46134.mp3"),
wrong:new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_262f2667c2.mp3?filename=error-126627.mp3"),
timeout:new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_d4a5e562c2.mp3?filename=timeout-107404.mp3")};
Object.values(sfx).forEach(a=>a.preload="auto");
bgAudio.volume=0.16;bgAudio.loop=true;bgAudio.muted=muted;
bgAudio.play().catch(()=>{});
muteBtn.textContent=muted?'üîá':'üîä';
muteBtn.onclick=()=>{muted=!muted;localStorage.setItem('muted',muted);
bgAudio.muted=muted;muteBtn.textContent=muted?'üîá':'üîä';};
function playSFX(t){if(!muted){const a=sfx[t];if(a){a.currentTime=0;a.play().catch(()=>{});}}}

/* ------------ HS helpers ------------ */
const KEY_HS_WORD='dh_hs_word_v1',KEY_HS_QUIZ='dh_hs_quiz_v1',KEY_HS_CASE='dh_hs_case_v1';
function getHS(k){return Number(localStorage.getItem(k)||0);}
function setHS(k,v){localStorage.setItem(k,String(v));}
function refreshHSUI(){
 document.getElementById('hsWord').textContent=getHS(KEY_HS_WORD);
 document.getElementById('hsQuiz').textContent=getHS(KEY_HS_QUIZ);
 document.getElementById('hsCase').textContent=getHS(KEY_HS_CASE);
}
refreshHSUI();

  /* ------------ Helpers ------------ */
const KEY_WS_STATE='dh_ws_state_v1',KEY_QUIZ_STATE='dh_quiz_state_v1',KEY_CASE_STATE='dh_case_state_v1';
let currentTimer=null;
function stopAllTimers(){if(currentTimer){clearInterval(currentTimer);currentTimer=null;}}
function startCountdown(sec,onTick,onExpire){
 stopAllTimers();let t=Math.max(0,Math.floor(sec));
 timerDisplay.textContent=t;onTick&&onTick(t);
 currentTimer=setInterval(()=>{t--;timerDisplay.textContent=Math.max(0,t);
 onTick&&onTick(t);if(t<=0){clearInterval(currentTimer);currentTimer=null;onExpire&&onExpire();}},1000);
}
function shuffle(a){return a.slice().sort(()=>Math.random()-0.5);}
function saveJSON(k,v){try{localStorage.setItem(k,JSON.stringify(v));}catch(e){}}
function loadJSON(k){try{const s=localStorage.getItem(k);return s?JSON.parse(s):null;}catch(e){return null;}}

/* ------------ Wordscape ------------ */
let wordList=[],currentWord='',shuffledLetters=[],selectedArr=[],wsScore=0,wsTimeLeft=15;
async function loadWordList(){
  const cacheKey = 'cached_words_v1';
  try {
    // Always force re-fetch
    const res = await fetch(wordURL, { cache: "no-store" });
    if (!res.ok) throw new Error("HTTP " + res.status);

    // GitHub sometimes sends text/plain, so handle both cases
    const text = await res.text();
    let data;
    try {
      data = JSON.parse(text);
    } catch {
      console.warn("Response not JSON ‚Äî retrying parse...");
      data = JSON.parse(text.replace(/,\s*]/, "]")); // handle trailing comma
    }

    // At this point we expect an array
    if (!Array.isArray(data)) throw new Error("Unexpected format");
    wordList = data.map(w => String(w).trim().toUpperCase()).filter(Boolean);
    saveJSON(cacheKey, wordList);
    console.log(`‚úÖ Word list loaded from remote (${wordList.length} words)`);
  } catch (err) {
    console.warn("‚ö†Ô∏è Could not load remote JSON:", err);
    const cached = loadJSON(cacheKey);
    if (cached && cached.length) {
      wordList = cached;
      console.log(`üì¶ Loaded ${cached.length} cached words`);
    } else {
      wordList = ["ENAMEL","CROWN","MOLAR","PLAQUE","DENTIN","PULP","CARIES","GINGIVA"];
      console.log("üíæ Using fallback words");
    }
  }
  }
async function startWordscape(){
  stopAllTimers();openGamePanel();backspaceBtn.style.display='inline-block';
  await loadWordList();
  const s=loadJSON(KEY_WS_STATE);
  if(s&&s.currentWord){
    currentWord=s.currentWord;shuffledLetters=s.shuffledLetters||shuffle(currentWord.split(''));
    selectedArr=s.selectedArr||[];wsScore=Number(s.wsScore||getHS(KEY_HS_WORD));
    wsTimeLeft=s.timeLeft||15;scoreDisplay.textContent=wsScore;
    renderWordscapeUI();
    startCountdown(wsTimeLeft,t=>wsTimeLeft=t,()=>{playSFX('timeout');setTimeout(()=>prepareNextWord(),600);});
  }else{wsScore=getHS(KEY_HS_WORD);scoreDisplay.textContent=wsScore;prepareNextWord();}
}
function saveWordscapeState(){
 saveJSON(KEY_WS_STATE,{currentWord,shuffledLetters,selectedArr,wsScore,timeLeft:Number(timerDisplay.textContent)||15});
}
function clearWordscapeState(){localStorage.removeItem(KEY_WS_STATE);}
function prepareNextWord(){
 stopAllTimers();selectedArr=[];
 currentWord=String(wordList[Math.floor(Math.random()*wordList.length)]||'ENAMEL').toUpperCase();
 shuffledLetters=shuffle(currentWord.split(''));wsTimeLeft=15;
 renderWordscapeUI();saveWordscapeState();
 startCountdown(wsTimeLeft,t=>wsTimeLeft=t,()=>{playSFX('timeout');setTimeout(()=>prepareNextWord(),600);});
}
function renderWordscapeUI(){
 questionEl.textContent='Form the word';
 const chips=selectedArr.map((c,i)=>`<div class="letter-chip" data-idx="${i}">${c}</div>`).join('');
 const letters=shuffledLetters.map((ch,i)=>`<button class="option-btn letter-btn" data-i="${i}" ${ch===''?'disabled':''}>${ch||''}</button>`).join('');
 contentArea.innerHTML=`
   <div class="word-row" id="wsChips">${chips}</div>
   <div style="text-align:center;font-weight:700;margin-bottom:8px">
     (${selectedArr.join('')||Array.from({length:currentWord.length}).map(()=> '‚Ä¢').join(' ')})
   </div>
   <div class="word-row" id="wsLetters">${letters}</div>
   <div style="margin-top:12px;text-align:center;color:var(--muted)" id="wsMsg"></div>`;
 contentArea.querySelectorAll('.letter-btn').forEach(btn=>{
   btn.onclick=()=>{const i=Number(btn.dataset.i);if(btn.disabled)return;playSFX('click');
     selectedArr.push(shuffledLetters[i]);shuffledLetters[i]='';saveWordscapeState();renderWordscapeUI();
     if(selectedArr.length===currentWord.length){
       const formed=selectedArr.join('');
       if(formed===currentWord){playSFX('correct');wsScore+=10;setHS(KEY_HS_WORD,wsScore);
         scoreDisplay.textContent=wsScore;document.getElementById('wsMsg').textContent='‚úÖ Correct ‚Äî '+formed;
         clearWordscapeState();setTimeout(()=>prepareNextWord(),700);}
       else{playSFX('wrong');document.getElementById('wsMsg').textContent='‚ùå Incorrect ‚Äî try again';
         setTimeout(()=>prepareNextWord(),900);}
     }
   };
 });
 contentArea.querySelectorAll('.letter-chip').forEach(chip=>{
   chip.onclick=()=>{const idx=Number(chip.dataset.idx);
     const removed=selectedArr.splice(idx,1)[0];
     const empty=shuffledLetters.indexOf('');
     if(empty!==-1)shuffledLetters[empty]=removed;else shuffledLetters.push(removed);
     playSFX('click');saveWordscapeState();renderWordscapeUI();};
 });
 backspaceBtn.onclick=()=>{
   if(!selectedArr.length)return;
   const r=selectedArr.pop();const empty=shuffledLetters.indexOf('');
   if(empty!==-1)shuffledLetters[empty]=r;else shuffledLetters.push(r);
   playSFX('click');saveWordscapeState();renderWordscapeUI();
 };
}

/* ------------ Quiz ------------ */
let quizData=[],quizIndex=0,quizScore=0,quiz_state={index:0,score:0,answeredMap:{},timeLeft:15};
async function startQuiz(){
 stopAllTimers();openGamePanel();backspaceBtn.style.display='none';
 try{const r=await fetch(quizURL);const d=await r.json();
   if(Array.isArray(d))quizData=d;else if(Array.isArray(d.questions))quizData=d.questions;}
 catch{quizData=[{question:"Which tissue covers the crown of a tooth?",options:["Cementum","Dentin","Enamel","Pulp"],answer:"Enamel"}];}
 const s=loadJSON(KEY_QUIZ_STATE);
 if(s){quiz_state=Object.assign(quiz_state,s);quizIndex=quiz_state.index||0;quizScore=quiz_state.score||getHS(KEY_HS_QUIZ);}
 else{quiz_state={index:0,score:getHS(KEY_HS_QUIZ),answeredMap:{},timeLeft:15};quizScore=quiz_state.score;}
 scoreDisplay.textContent=quizScore;renderQuizQuestion();
}
function saveQuizState(){quiz_state.index=quizIndex;quiz_state.score=quizScore;
 quiz_state.timeLeft=Number(timerDisplay.textContent)||15;saveJSON(KEY_QUIZ_STATE,quiz_state);}
function renderQuizQuestion(){
 stopAllTimers();const q=quizData[quizIndex];
 if(!q){questionEl.textContent='No questions';contentArea.innerHTML='';return;}
 const text=q.question||q.stem||'Untitled question';
 const choices=q.options||q.choices||[];const correct=q.answer||q.correct||'';
 const status=quiz_state.answeredMap[quizIndex];const label=status?(status.status==='answered'?'‚úÖ Answered':'‚è≠ Skipped'):'';
 questionEl.textContent=(label?label+' ¬∑ ':'')+text;
 contentArea.innerHTML=`<div class="options" id="quizOptions"></div>
 <div style="margin-top:10px;text-align:center">
   <button class="option-btn" id="prevBtn">‚¨ÖÔ∏è Previous</button>
   <button class="option-btn" id="nextBtn" style="margin-left:8px">Next ‚û°Ô∏è</button>
 </div><div id="quizMsg" style="margin-top:8px;text-align:center;color:var(--muted)"></div>`;
 const wrap=document.getElementById('quizOptions');
 shuffle(choices).forEach(c=>{
   const b=document.createElement('button');b.className='option-btn';b.textContent=c;
   b.onclick=()=>{playSFX('click');wrap.querySelectorAll('button').forEach(x=>x.disabled=true);stopAllTimers();
     const good=String(c).toLowerCase().trim()===String(correct).toLowerCase().trim();
     quiz_state.answeredMap[quizIndex]={status:'answered',selected:c};
     if(good){playSFX('correct');quizScore+=10;setHS(KEY_HS_QUIZ,quizScore);}else playSFX('wrong');
     scoreDisplay.textContent=quizScore;document.getElementById('quizMsg').textContent=good?'‚úÖ Correct':'‚ùå Incorrect';
     saveQuizState();setTimeout(()=>{quizIndex=(quizIndex+1)%quizData.length;renderQuizQuestion();},800);};
   wrap.appendChild(b);
 });
 document.getElementById('prevBtn').onclick=()=>{playSFX('click');quizIndex=(quizIndex-1+quizData.length)%quizData.length;renderQuizQuestion();};
 document.getElementById('nextBtn').onclick=()=>{playSFX('click');quizIndex=(quizIndex+1)%quizData.length;renderQuizQuestion();};
 startCountdown(quiz_state.timeLeft||15,t=>quiz_state.timeLeft=t,()=>{
   playSFX('timeout');quiz_state.answeredMap[quizIndex]={status:'skipped',selected:null};
   document.getElementById('quizMsg').textContent="‚è± Time's up! Moving next...";
   saveQuizState();setTimeout(()=>{quizIndex=(quizIndex+1)%quizData.length;renderQuizQuestion();},900);
 });
}

/* ------------ Case Challenge ------------ */
let caseData=[],caseIndex=0,caseScore=0,case_state={index:0,score:0,answeredMap:{},timeLeft:15};
async function startCase(){
 stopAllTimers();openGamePanel();backspaceBtn.style.display='none';
 try{const r=await fetch(caseURL);const d=await r.json();
   if(Array.isArray(d))caseData=d;else if(Array.isArray(d.cases))caseData=d.cases;}
 catch{caseData=[{case:"25-year-old with sharp pain on biting lower molar with deep caries. Most likely?",options:["Gingivitis","Pulpitis","Periodontitis","Pericoronitis"],answer:"Pulpitis"}];}
 const s=loadJSON(KEY_CASE_STATE);
 if(s){case_state=Object.assign(case_state,s);caseIndex=case_state.index||0;caseScore=case_state.score||getHS(KEY_HS_CASE);}
 else{case_state={index:0,score:getHS(KEY_HS_CASE),answeredMap:{},timeLeft:15};caseScore=case_state.score;}
 scoreDisplay.textContent=caseScore;renderCaseQuestion();
}
function saveCaseState(){case_state.index=caseIndex;case_state.score=caseScore;
 case_state.timeLeft=Number(timerDisplay.textContent)||15;saveJSON(KEY_CASE_STATE,case_state);}
function renderCaseQuestion(){
 stopAllTimers();const c=caseData[caseIndex];
 if(!c){questionEl.textContent='No cases';contentArea.innerHTML='';return;}
 const stem=c.case||c.title||'Case';const opts=c.options||c.choices||[];
 const correct=c.answer||c.correct||'';const status=case_state.answeredMap[caseIndex];
 const label=status?(status.status==='answered'?'‚úÖ Answered':'‚è≠ Skipped'):'';
 questionEl.textContent=(label?label+' ¬∑ ':'')+stem;
 contentArea.innerHTML=`<div class="options" id="caseOptions"></div>
 <div style="margin-top:10px;text-align:center">
   <button class="option-btn" id="prevCaseBtn">‚¨ÖÔ∏è Previous</button>
   <button class="option-btn" id="nextCaseBtn" style="margin-left:8px">Next ‚û°Ô∏è</button>
 </div><div id="caseMsg" style="margin-top:8px;text-align:center;color:var(--muted)"></div>`;
 const w=document.getElementById('caseOptions');
 shuffle(opts).forEach(o=>{
   const b=document.createElement('button');b.className='option-btn';b.textContent=o;
   b.onclick=()=>{playSFX('click');w.querySelectorAll('button').forEach(x=>x.disabled=true);stopAllTimers();
     const good=String(o).toLowerCase().trim()===String(correct).toLowerCase().trim();
     case_state.answeredMap[caseIndex]={status:'answered',selected:o};
     if(good){playSFX('correct');caseScore+=10;setHS(KEY_HS_CASE,caseScore);}else playSFX('wrong');
     scoreDisplay.textContent=caseScore;document.getElementById('caseMsg').textContent=good?'‚úÖ Correct':'‚ùå Incorrect';
     saveCaseState();setTimeout(()=>{caseIndex=(caseIndex+1)%caseData.length;renderCaseQuestion();},800);};
   w.appendChild(b);
 });
 document.getElementById('prevCaseBtn').onclick=()=>{playSFX('click');caseIndex=(caseIndex-1+caseData.length)%caseData.length;renderCaseQuestion();};
 document.getElementById('nextCaseBtn').onclick=()=>{playSFX('click');caseIndex=(caseIndex+1)%caseData.length;renderCaseQuestion();};
 startCountdown(case_state.timeLeft||15,t=>case_state.timeLeft=t,()=>{
   playSFX('timeout');case_state.answeredMap[caseIndex]={status:'skipped',selected:null};
   document.getElementById('caseMsg').textContent="‚è± Time's up! Moving next...";
   saveCaseState();setTimeout(()=>{caseIndex=(caseIndex+1)%caseData.length;renderCaseQuestion();},900);
 });
}

/* ------------ Navigation ------------ */
document.getElementById('openWordscape').onclick=()=>startWordscape();
document.getElementById('openQuiz').onclick=()=>startQuiz();
document.getElementById('openCase').onclick=()=>startCase();
btnHome.onclick=()=>closeGamePanel();
function openGamePanel(){
 homeEl.style.display='none';gameArea.style.display='flex';
 setTimeout(()=>gamePanel.classList.add('show'),20);
 gameArea.setAttribute('aria-hidden','false');
}
function closeGamePanel(){
 gamePanel.classList.remove('show');
 setTimeout(()=>{gameArea.style.display='none';homeEl.style.display='';
 contentArea.innerHTML='';questionEl.textContent='Loading...';stopAllTimers();refreshHSUI();},320);
}
window.addEventListener('pointerdown',function resumeAudio(){
 if(bgAudio.paused&&!muted){bgAudio.play().catch(()=>{});}
 Object.values(sfx).forEach(a=>a.play().catch(()=>a.pause()));
 window.removeEventListener('pointerdown',resumeAudio);
},{once:true});
</script>
</body>
</html>
